exports.id=564,exports.ids=[564],exports.modules={8406:e=>{e.exports={sliderWrapper:"ImageSlider_sliderWrapper__ATG_p",sliderContainer:"ImageSlider_sliderContainer__SplPC",imageContainer:"ImageSlider_imageContainer__fu_oG",productName:"ImageSlider_productName__8ZxvA",sliderButton:"ImageSlider_sliderButton__6yrAY",prev:"ImageSlider_prev__LItUw",next:"ImageSlider_next__np40Z"}},7795:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>d});var s=t(997),n=t(6689),i=t(580),r=t.n(i),o=t(8406),l=t.n(o);let c=({images:e=[]})=>{let[a,t]=(0,n.useState)(0),i=(0,n.useCallback)(()=>{t(a=>e.length>0?a===e.length-1?0:a+1:0)},[e,e.length]),r=(0,n.useCallback)(()=>{t(a=>e.length>0?0===a?e.length-1:a-1:0)},[e,e.length]);return 0===e.length?s.jsx("div",{children:"No images available"}):(0,s.jsxs)("div",{className:l().sliderWrapper,children:[s.jsx("button",{onClick:r,className:`${l().sliderButton} ${l().prev}`,children:"❮"}),s.jsx("div",{className:l().sliderContainer,children:(0,s.jsxs)("div",{className:l().imageContainer,children:[s.jsx("img",{src:e[a].url,alt:e[a].name}),s.jsx("div",{className:l().productName,children:e[a].name})]})}),s.jsx("button",{onClick:i,className:`${l().sliderButton} ${l().next}`,children:"❯"})]})};c.propTypes={images:r().arrayOf(r().shape({url:r().string.isRequired,name:r().string.isRequired}))};let d=c},384:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(997),n=t(9816),i=t.n(n),r=t(1664),o=t.n(r),l=t(6689);let c=()=>{let[e,a]=(0,l.useState)("map"),t=e=>{a(e)};return(0,s.jsxs)("nav",{className:"jsx-3adacb8c3b879863 navbar",children:[(0,s.jsxs)("ul",{className:"jsx-3adacb8c3b879863 navLinks",children:[s.jsx("li",{className:"jsx-3adacb8c3b879863",children:s.jsx(o(),{href:"/",onClick:()=>t("map"),children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-3adacb8c3b879863",children:(0,s.jsxs)("g",{id:"carbon:map",className:"jsx-3adacb8c3b879863",children:[s.jsx("path",{id:"Vector",d:"M16 24L9.91 15.4C8.91318 14.2231 8.27124 12.7872 8.05896 11.2595C7.84667 9.73183 8.07276 8.17529 8.71091 6.77115C9.34906 5.36702 10.373 4.17308 11.6635 3.32839C12.9539 2.4837 14.4578 2.02302 16 2C18.1377 2.02113 20.18 2.88859 21.6794 4.41241C23.1789 5.93623 24.0133 7.99219 24 10.13C24.0008 11.9949 23.3659 13.8044 22.2 15.26L16 24ZM16 4C14.3919 4.01847 12.8568 4.67438 11.7318 5.82371C10.6069 6.97303 9.984 8.52183 10 10.13C10.0076 11.5977 10.5355 13.0151 11.49 14.13L16 20.52L20.63 14C21.5101 12.9014 21.9929 11.5376 22 10.13C22.016 8.52183 21.3931 6.97303 20.2682 5.82371C19.1432 4.67438 17.6081 4.01847 16 4Z",fill:"map"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"}),s.jsx("path",{id:"Vector_2",d:"M16 11C17.1046 11 18 10.1046 18 9C18 7.89543 17.1046 7 16 7C14.8954 7 14 7.89543 14 9C14 10.1046 14.8954 11 16 11Z",fill:"map"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"}),s.jsx("path",{id:"Vector_3",d:"M28 12H26V14H28V28H4V14H6V12H4C3.46957 12 2.96086 12.2107 2.58579 12.5858C2.21071 12.9609 2 13.4696 2 14V28C2 28.5304 2.21071 29.0391 2.58579 29.4142C2.96086 29.7893 3.46957 30 4 30H28C28.5304 30 29.0391 29.7893 29.4142 29.4142C29.7893 29.0391 30 28.5304 30 28V14C30 13.4696 29.7893 12.9609 29.4142 12.5858C29.0391 12.2107 28.5304 12 28 12Z",fill:"map"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"})]})})})}),s.jsx("li",{className:"jsx-3adacb8c3b879863",children:s.jsx(o(),{href:"/",onClick:()=>t("home"),children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-3adacb8c3b879863",children:(0,s.jsxs)("g",{id:"ri:home-line",className:"jsx-3adacb8c3b879863",children:[s.jsx("path",{id:"Vector",d:"M28 26.6667C28 27.0203 27.8595 27.3594 27.6095 27.6095C27.3594 27.8595 27.0203 28 26.6667 28H5.33333C4.97971 28 4.64057 27.8595 4.39052 27.6095C4.14048 27.3594 4 27.0203 4 26.6667V12.6533C3.99986 12.4502 4.04616 12.2496 4.13535 12.0671C4.22455 11.8845 4.35429 11.7248 4.51467 11.6L15.1813 3.30267C15.4154 3.12059 15.7035 3.02174 16 3.02174C16.2965 3.02174 16.5846 3.12059 16.8187 3.30267L27.4853 11.6C27.6457 11.7248 27.7754 11.8845 27.8646 12.0671C27.9538 12.2496 28.0001 12.4502 28 12.6533V26.6667ZM25.3333 25.3333V13.304L16 6.04533L6.66667 13.304V25.3333H25.3333Z",fill:"home"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"}),s.jsx("line",{id:"Line 1",x1:"13.3333",y1:"23.5",x2:"18.6667",y2:"23.5",stroke:"home"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"})]})})})}),s.jsx("li",{className:"jsx-3adacb8c3b879863",children:s.jsx(o(),{href:"/",onClick:()=>t("heart"),children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-3adacb8c3b879863",children:s.jsx("g",{id:"mdi:heart",className:"jsx-3adacb8c3b879863",children:s.jsx("path",{id:"Vector",d:"M14.7399 25.9672L14.7384 25.9659C11.2854 22.8347 8.49989 20.3032 6.56593 17.9371C4.64296 15.5845 3.66667 13.5179 3.66667 11.3333C3.66667 7.76681 6.44443 5 10 5C12.0177 5 13.9708 5.94446 15.2412 7.42462L16 8.30876L16.7588 7.42462C18.0292 5.94446 19.9823 5 22 5C25.5556 5 28.3333 7.76681 28.3333 11.3333C28.3333 13.5179 27.357 15.5845 25.4341 17.9371C23.5001 20.3032 20.7146 22.8347 17.2616 25.9659L17.2602 25.9672L16 27.1144L14.7399 25.9672Z",stroke:"heart"===e?"black":"#A2A2A2",strokeWidth:"2",className:"jsx-3adacb8c3b879863"})})})})}),s.jsx("li",{className:"jsx-3adacb8c3b879863",children:s.jsx(o(),{href:"/",onClick:()=>t("user"),children:s.jsx("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"jsx-3adacb8c3b879863",children:s.jsx("g",{id:"ph:user",className:"jsx-3adacb8c3b879863",children:s.jsx("path",{id:"Vector",d:"M28.865 26.5C26.9613 23.2088 24.0275 20.8488 20.6038 19.73C22.2973 18.7218 23.6131 17.1856 24.349 15.3572C25.085 13.5289 25.2004 11.5095 24.6776 9.6092C24.1548 7.70889 23.0226 6.03274 21.455 4.83816C19.8873 3.64357 17.9709 2.9966 16 2.9966C14.0291 2.9966 12.1127 3.64357 10.545 4.83816C8.9774 6.03274 7.84525 7.70889 7.32243 9.6092C6.79961 11.5095 6.91504 13.5289 7.65099 15.3572C8.38694 17.1856 9.70271 18.7218 11.3963 19.73C7.9725 20.8475 5.03875 23.2075 3.135 26.5C3.06519 26.6138 3.01888 26.7405 2.99881 26.8725C2.97875 27.0045 2.98532 27.1392 3.01816 27.2687C3.05099 27.3981 3.10942 27.5197 3.18999 27.6262C3.27056 27.7327 3.37165 27.8219 3.48728 27.8887C3.60292 27.9555 3.73076 27.9985 3.86326 28.0151C3.99577 28.0316 4.13025 28.0215 4.25878 27.9853C4.38731 27.9491 4.50728 27.8875 4.61161 27.8041C4.71595 27.7208 4.80253 27.6174 4.86625 27.5C7.22125 23.43 11.3838 21 16 21C20.6163 21 24.7788 23.43 27.1338 27.5C27.1975 27.6174 27.2841 27.7208 27.3884 27.8041C27.4927 27.8875 27.6127 27.9491 27.7412 27.9853C27.8698 28.0215 28.0042 28.0316 28.1367 28.0151C28.2692 27.9985 28.3971 27.9555 28.5127 27.8887C28.6284 27.8219 28.7294 27.7327 28.81 27.6262C28.8906 27.5197 28.949 27.3981 28.9818 27.2687C29.0147 27.1392 29.0213 27.0045 29.0012 26.8725C28.9811 26.7405 28.9348 26.6138 28.865 26.5ZM9 12C9 10.6155 9.41054 9.26215 10.1797 8.11101C10.9489 6.95987 12.0421 6.06266 13.3212 5.53284C14.6003 5.00303 16.0078 4.86441 17.3656 5.1345C18.7235 5.4046 19.9708 6.07129 20.9497 7.05025C21.9287 8.02922 22.5954 9.2765 22.8655 10.6344C23.1356 11.9922 22.997 13.3997 22.4672 14.6788C21.9373 15.9579 21.0401 17.0511 19.889 17.8203C18.7378 18.5895 17.3845 19 16 19C14.1441 18.998 12.3648 18.2599 11.0524 16.9476C9.74012 15.6352 9.00199 13.8559 9 12Z",fill:"user"===e?"black":"#A2A2A2",className:"jsx-3adacb8c3b879863"})})})})})]}),s.jsx(i(),{id:"3adacb8c3b879863",children:".navbar.jsx-3adacb8c3b879863{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem 2rem;background-color:white}.navLinks.jsx-3adacb8c3b879863{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;list-style:none;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;width:100%;max-width:400px;margin:0;padding:0}.logo.jsx-3adacb8c3b879863{font-size:1.5rem;font-weight:bold;text-decoration:none;color:#333}.navLinks.jsx-3adacb8c3b879863{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;list-style:none}.navLinks.jsx-3adacb8c3b879863 li.jsx-3adacb8c3b879863{margin-left:1rem}.navLinks.jsx-3adacb8c3b879863 a.jsx-3adacb8c3b879863{text-decoration:none;color:#333}.navLinks.jsx-3adacb8c3b879863 a.jsx-3adacb8c3b879863:hover{color:#007bff}"})]})}},5566:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>r});var s=t(997),n=t(9816),i=t.n(n);t(6689);let r=({onClose:e,onMove:a})=>(0,s.jsxs)("div",{className:"jsx-85200adb8b9fba0a alert-container",children:[(0,s.jsxs)("div",{className:"jsx-85200adb8b9fba0a text-container",children:[s.jsx("p",{className:"jsx-85200adb8b9fba0a",children:"이동 버튼 클릭시"}),(0,s.jsxs)("p",{className:"jsx-85200adb8b9fba0a",children:["해당 ",s.jsx("span",{className:"jsx-85200adb8b9fba0a",children:"상품 페이지"}),"로 이동합니다."]})]}),(0,s.jsxs)("div",{className:"jsx-85200adb8b9fba0a btn-container",children:[s.jsx("div",{onClick:e,className:"jsx-85200adb8b9fba0a btn-left",children:"취소"}),s.jsx("div",{onClick:a,className:"jsx-85200adb8b9fba0a btn-right",children:"이동"})]}),s.jsx(i(),{id:"85200adb8b9fba0a",children:".alert-container.jsx-85200adb8b9fba0a{width:18rem;height:12.3125rem;-webkit-border-radius:.9375rem;-moz-border-radius:.9375rem;border-radius:.9375rem;background:#FFF;position:relative}.alert-container.jsx-85200adb8b9fba0a p.jsx-85200adb8b9fba0a{color:#222;text-align:center;font-family:NanumSquare_ac;font-size:.8135rem;font-style:normal;font-weight:400;line-height:1.0625rem;letter-spacing:-.02563rem;margin:0rem}.text-container.jsx-85200adb8b9fba0a{padding-top:2.87rem}.text-container.jsx-85200adb8b9fba0a span.jsx-85200adb8b9fba0a{color:#536DFE}.btn-container.jsx-85200adb8b9fba0a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;position:absolute;bottom:0px}.btn-left.jsx-85200adb8b9fba0a,.btn-right.jsx-85200adb8b9fba0a{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;width:9rem;height:2.9375rem;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;background:#536DFE;cursor:pointer;color:white}.btn-left.jsx-85200adb8b9fba0a{-webkit-border-radius:0rem 0rem 0rem .9375rem;-moz-border-radius:0rem 0rem 0rem .9375rem;border-radius:0rem 0rem 0rem .9375rem}.btn-right.jsx-85200adb8b9fba0a{-webkit-border-radius:0rem 0rem .9375rem 0rem;-moz-border-radius:0rem 0rem .9375rem 0rem;border-radius:0rem 0rem .9375rem 0rem}"})]})},9564:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>m});var s=t(997),n=t(9816),i=t.n(n),r=t(6689),o=t(6405),l=t.n(o),c=t(384),d=t(5566),p=t(7795);let x=({name:e,onSetDestination:a,storeData:t,error:n})=>{let r=t?.data.shop_list.flatMap(e=>e.product.map(e=>({url:`http://ec2-3-37-50-217.ap-northeast-2.compute.amazonaws.com:9090${e.product_image_url}`,name:e.product_name})))||[],o=e=>e.reduce((e,a)=>e+a.product_view_count,0),l=async()=>{try{let t=await fetch(`/api/map/set/destination/${encodeURIComponent(e)}`,{method:"GET"}),s=await t.json();if(console.log("API 응답 status_code:",s.status_code),200===s.status_code)a(s.data.latitude,s.data.longitude),console.log("destincatino setting 설정:",s.data.latitude,s.data.longitude);else throw Error(`목적지 설정 실패: ${s.message}`)}catch(e){console.error("목적지 설정 오류:",e)}};return(0,s.jsxs)("div",{className:"jsx-4a62a23589ae55a2 pop-up-container",children:[s.jsx("div",{className:"jsx-4a62a23589ae55a2 slider-container",children:t?s.jsx(p.default,{images:r}):s.jsx("p",{className:"jsx-4a62a23589ae55a2",children:"이미지 로딩 중..."})}),s.jsx("p",{className:"jsx-4a62a23589ae55a2 title",children:e}),n&&s.jsx("p",{className:"jsx-4a62a23589ae55a2 error",children:n}),t?t.data.shop_list.map((e,a)=>(0,s.jsxs)("div",{className:"jsx-4a62a23589ae55a2 store-container",children:[(0,s.jsxs)("div",{className:"jsx-4a62a23589ae55a2 store-title",children:[s.jsx("span",{className:"jsx-4a62a23589ae55a2 shop-name",children:e.shop_name}),s.jsx("span",{className:"jsx-4a62a23589ae55a2 view-count",children:`${o(e.product)}`})]}),s.jsx("p",{className:"jsx-4a62a23589ae55a2 store-info",children:`${e.shop_address_details} ${e.shop_contact}`})]},a)):s.jsx("p",{className:"jsx-4a62a23589ae55a2",children:"상점 정보 로딩 중..."}),s.jsx("button",{onClick:l,className:"jsx-4a62a23589ae55a2 enpoint-btn",children:"목적지 설정"}),s.jsx(i(),{id:"4a62a23589ae55a2",children:".pop-up-container.jsx-4a62a23589ae55a2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:253px;padding-top:20px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background:rgba(34,34,34,.99);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.slider-container.jsx-4a62a23589ae55a2{width:205px;height:132px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:10px}.title.jsx-4a62a23589ae55a2{width:200px;color:#FFF;font-family:Roboto;font-size:16px;font-weight:500;letter-spacing:1px}.store-container.jsx-4a62a23589ae55a2{width:207px;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;background:#4C4C4C;margin-bottom:8px;padding-bottom:8px}.store-title.jsx-4a62a23589ae55a2{width:207px;padding:4px 0;background:#304FFE;color:#FFF;font-family:NanumSquare_ac;font-size:12px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.shop-name.jsx-4a62a23589ae55a2{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1;text-align:left;padding-left:10px}.view-count.jsx-4a62a23589ae55a2{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;padding-right:10px}.store-info.jsx-4a62a23589ae55a2,.product-info.jsx-4a62a23589ae55a2{color:#FFF;font-family:NanumSquare_ac;font-size:12px;text-align:center;margin:4px 0}.enpoint-btn.jsx-4a62a23589ae55a2{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:10px;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;background:#304FFE;color:#FFF;border:none;cursor:pointer;margin-bottom:20px}.error.jsx-4a62a23589ae55a2{color:red;font-size:12px}"})]})},b=({onSearch:e})=>{let[a,t]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[o,l]=(0,r.useState)(!1),c=(0,r.useCallback)(function(e,a){let t;return function(...a){clearTimeout(t),t=setTimeout(()=>{clearTimeout(t),e(...a)},300)}}(e=>{window.kakao&&window.kakao.maps&&window.kakao.maps.services&&new window.kakao.maps.services.Places().keywordSearch(e,(e,a)=>{a===window.kakao.maps.services.Status.OK&&(i([...new Set(e.map(e=>e.place_name))].slice(0,5)),l(!0))})},0),[]);return(0,s.jsxs)("div",{style:{position:"absolute",top:"3.5rem",left:"10px",right:"10px",zIndex:11},children:[s.jsx("form",{onSubmit:t=>{t.preventDefault(),e(a),l(!1)},children:s.jsx("input",{type:"text",value:a,onChange:e=>{let a=e.target.value;t(a),a.length>1?c(a):i([])},placeholder:"장소를 검색하세요",style:{width:"100%",padding:"10px",borderRadius:"20px",border:"0px solid #222222",fontSize:"14px"}})}),o&&n.length>0&&s.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,backgroundColor:"white",borderRadius:"0 0 20px 20px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",zIndex:11},children:n.map((a,i)=>s.jsx("li",{onClick:()=>{t(a),e(a),l(!1)},style:{padding:"10px",cursor:"pointer",borderBottom:i<n.length-1?"1px solid #eee":"none"},children:a},i))})]})},m=()=>{let[e,a]=(0,r.useState)(null),[t,n]=(0,r.useState)(null),[i,o]=(0,r.useState)([]),p=(0,r.useRef)({}),m=(0,r.useRef)(null),[u,g]=(0,r.useState)(null),[h,f]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),[j,C]=(0,r.useState)(null),[y,v]=(0,r.useState)(null),[L,N]=(0,r.useState)(null),[F,S]=(0,r.useState)(null),[_,z]=(0,r.useState)(!1),[E,M]=(0,r.useState)(null),[A,O]=(0,r.useState)(!1),[P,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=new Worker("distanceWorker.js");return I(e),()=>e.terminate()},[]);let B=(0,r.useCallback)((e,a,t,s)=>new Promise(n=>{P.onmessage=e=>n(e.data),P.postMessage({lat1:e,lon1:a,lat2:t,lon2:s})}),[P]),V=async()=>{try{let e=await fetch("/api/map/get/mall/street");if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return await e.json()}catch(e){throw console.error("Error fetching mall street data:",e),e}};(0,r.useCallback)(()=>{Object.values(p.current).forEach(({marker:e})=>e.setMap(null)),p.current={},u&&u.setMap(null),j&&j.setMap(null)},[u,j]);let $=(0,r.useCallback)(async(a,n)=>{if(!h||!w){console.error("User circle or destination circle is not initialized");return}let i=await B(a.getLat(),a.getLng(),n.getLat(),n.getLng())*1e3<=35,r=i?"#FF0000":"#304FFE",o=i?"#FF0000":"#304FFE";if(h.setOptions({strokeColor:r,fillColor:o,strokeOpacity:.8,fillOpacity:.3}),w.setOptions({strokeColor:r,fillColor:o,strokeOpacity:.8,fillOpacity:.3}),z(i),i){Object.values(p.current).forEach(({marker:e,infowindow:a})=>{e&&e.setMap(null),a&&a.close()}),p.current={},u&&u.setMap(null),j&&j.setMap(null),E&&E.setMap(null);let n=document.createElement("div");Object.assign(n.style,{width:"18rem",height:"12.3125rem",borderRadius:"0.9375rem",backgroundColor:"#FFF",position:"relative",zIndex:"10"});let i=new t.maps.CustomOverlay({content:n,map:e,position:a,zIndex:1e4});l().render(s.jsx(d.default,{onClose:()=>{i.setMap(null),O(!0)},onMove:()=>{console.log("Move button clicked")}}),n),M(i)}else E&&E.setMap(null)},[e,t,h,w,30,5,E,u,j,B]);(0,r.useEffect)(()=>{_&&E?E.setMap(e):E&&E.setMap(null)},[_,E,e]),(0,r.useEffect)(()=>()=>{E&&E.setMap(null)},[E]);let Z=(0,r.useCallback)(async(a,s)=>{if(e&&t){Object.values(p.current).forEach(({marker:e})=>e.setMap(null)),p.current={},[w,y].forEach(e=>e&&e.setMap(null));let n=new t.maps.LatLng(a,s);j?j.setPosition(n):C(new t.maps.Marker({position:n,map:e})),k(new t.maps.Circle({center:n,radius:30,strokeWeight:2,strokeColor:"#304FFE",strokeOpacity:.8,strokeStyle:"solid",fillColor:"#304FFE",fillOpacity:.3,map:e}));let i=u?u.getPosition():e.getCenter(),r=i.getLat(),l=i.getLng(),c=await B(r,l,a,s);F&&F.setMap(null);let d=new t.maps.CustomOverlay({position:new t.maps.LatLng((r+a)/2,(l+s)/2),content:`<div style="padding:5px;background:rgba(255,255,255,0.7);border-radius:5px;color:black;">${(1e3*c).toFixed(0)}m</div>`,map:e});S(d);let x=new t.maps.Polyline({path:[i,n],strokeWeight:3,strokeColor:"#686D76",strokeOpacity:.7,strokeStyle:"solid"});x.setMap(e),v(x);let b=new t.maps.LatLngBounds;b.extend(i),b.extend(n),e.setBounds(b),$(i,n),L&&navigator.geolocation.clearWatch(L),N(navigator.geolocation.watchPosition(async e=>{let i=e.coords.latitude,r=e.coords.longitude,o=new t.maps.LatLng(i,r);u.setPosition(o),h.setPosition(o),$(o,n),x.setPath([o,n]);let l=await B(i,r,a,s);d.setPosition(new t.maps.LatLng((i+a)/2,(r+s)/2)),d.setContent(`<div style="padding:5px;background:white;border-radius:5px;color: black;">${(1e3*l).toFixed(0)}m</div>`)},e=>{console.error("Error watching user location:",e)},{enableHighAccuracy:!0,maximumAge:0,timeout:5e3})),m.current&&(m.current.close(),m.current=null),o([{name:"목적지",lat:a,lng:s}])}},[e,t,u,h,w,j,y,L,F,$,30,B]);(0,r.useEffect)(()=>()=>{L&&navigator.geolocation.clearWatch(L),F&&F.setMap(null)},[L,F]);let H=(0,r.useCallback)((a,n,i,r)=>{if(!e||!t)return console.error("Map or Kakao object is not initialized"),null;let o=new t.maps.LatLng(a,n),c=new t.maps.Marker({position:o,map:e,zIndex:1}),d=document.createElement("div"),p=new t.maps.InfoWindow({content:d,zIndex:2});return t.maps.event.addListener(c,"click",function(){m.current&&m.current.close(),l().render(s.jsx(x,{name:i,lat:a,lng:n,onSetDestination:Z,storeData:null}),d),p.open(e,c),m.current=p;let r=setTimeout(()=>{t.maps.event.addListener(e,"click",o)},100);function o(){p.close(),m.current=null,t.maps.event.removeListener(e,"click",o),clearTimeout(r)}fetch(`/api/map/get/products/map/${encodeURIComponent(i)}`).then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{l().render(s.jsx(x,{name:i,lat:a,lng:n,onSetDestination:Z,storeData:e}),d)}).catch(e=>{console.error("Error fetching store data:",e),l().render(s.jsx(x,{name:i,lat:a,lng:n,onSetDestination:Z,storeData:null,error:"데이터를 불러오는 데 실패했습니다."}),d)})}),{marker:c,infowindow:p}},[e,t,Z]),R=(0,r.useCallback)(()=>{if(window.kakao&&window.kakao.maps){let e=document.getElementById("map"),t={center:new window.kakao.maps.LatLng(36.9692,127.8717),level:3},s=new window.kakao.maps.Map(e,t);a(s),n(window.kakao),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let a=e.coords.latitude,t=e.coords.longitude,n=new window.kakao.maps.LatLng(a,t);s.setCenter(n),g(new window.kakao.maps.Marker({position:n,map:s})),f(new window.kakao.maps.Circle({center:n,radius:5,strokeWeight:2,strokeColor:"#304FFE",strokeOpacity:.8,strokeStyle:"solid",fillColor:"#304FFE",fillOpacity:.3,map:s}))},e=>{console.error("Error getting user location:",e)}):console.error("Geolocation is not supported by this browser.")}},[]);(0,r.useEffect)(()=>{let e=document.createElement("script");return e.src="//dapi.kakao.com/v2/maps/sdk.js?appkey=50912e872dcc098ce3db6b205dd83c96&libraries=services&autoload=false",e.async=!0,e.onload=()=>{window.kakao.maps.load(R)},document.head.appendChild(e),()=>{document.head.removeChild(e)}},[R]),(0,r.useEffect)(()=>{e&&t&&(Object.values(p.current).forEach(({marker:e,infowindow:a})=>{e&&e.setMap(null),a&&a.close()}),p.current={},i.forEach(e=>{let a=H(e.lat,e.lng,e.name,e.id);a&&(p.current[e.id]=a)}),m.current&&(m.current.close(),m.current=null))},[e,t,i,H]);let W=(0,r.useCallback)(async(a,s)=>{if(e&&t&&u&&h){let n=new t.maps.LatLng(a,s);if(u.setPosition(n),h.setPosition(n),e.setCenter(n),w&&j){let i=w.getPosition();await $(n,i),y&&y.setPath([n,i]);let r=await B(a,s,i.getLat(),i.getLng());F&&(F.setPosition(new t.maps.LatLng((a+i.getLat())/2,(s+i.getLng())/2)),F.setContent(`<div style="padding:5px;background:rgba(255,255,255,0.7);border-radius:5px;color:black;">${(1e3*r).toFixed(0)}m</div>`));let o=new t.maps.LatLngBounds;o.extend(n),o.extend(i),e.setBounds(o)}}},[e,t,u,h,w,j,y,F,$,B]),D=(0,r.useCallback)(a=>{e&&t&&t.maps.services&&new t.maps.services.Places().keywordSearch(a,(a,s,n)=>{if(s===t.maps.services.Status.OK){let s=new t.maps.LatLngBounds,n=[];Object.values(p.current).forEach(({marker:e,infowindow:a})=>{e.setMap(null),a.close()}),p.current={};for(let e=0;e<a.length;e++){let i=new t.maps.LatLng(a[e].y,a[e].x),r={id:a[e].id,name:a[e].place_name,lat:a[e].y,lng:a[e].x,address:a[e].address_name,phone:a[e].phone};n.push(r),s.extend(i);let o=H(r.lat,r.lng,r.name,r.id);p.current[r.id]=o}e.setBounds(s),o(n)}})},[e,t,o,H]),T=(0,r.useCallback)(async()=>{if(e&&t&&t.maps.services)try{let a=await V();Object.values(p.current).forEach(({marker:e,infowindow:a})=>{e.setMap(null),a.close()}),p.current={};let s=new t.maps.LatLngBounds,n=new t.maps.services.Places,i=async(e,i)=>new Promise(r=>{n.keywordSearch(e,(a,n)=>{if(n===t.maps.services.Status.OK){let n=a[0],r=n.y,o=n.x,l=new t.maps.LatLng(r,o),c=H(r,o,e,i.toString());p.current[i.toString()]=c,s.extend(l)}else console.log(`No results found for ${e}`);r()},{location:new t.maps.LatLng(a.data.standard_position.Latitude,a.data.standard_position.longitude),radius:5e3})});for(let e of q(a.data.mall_name_list,5))await Promise.all(e.map((e,a)=>i(e,a)));e.setBounds(s)}catch(e){console.error("Error in addMarkersByStoreNameList:",e)}},[e,t,H,V]),q=(e,a)=>{let t=[];for(let s=0;s<e.length;s+=a)t.push(e.slice(s,s+a));return t},G=(0,r.useCallback)(()=>{requestAnimationFrame(G)},[]);(0,r.useEffect)(()=>{requestAnimationFrame(G)},[G]);let K=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{let{latitude:a,longitude:t}=e.coords;W(a,t)},e=>{console.error("Error fetching user location:",e)},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0}):console.error("Geolocation is not supported by this browser.")};return(0,s.jsxs)("div",{style:{position:"relative",width:"360px",height:"640px"},children:[s.jsx("div",{id:"map",style:{width:"100%",height:"100%"}}),s.jsx(b,{onSearch:D}),s.jsx("button",{onClick:()=>{T()},style:{width:"6rem",height:"1.5rem",position:"absolute",top:"6.5rem",padding:"0.38rem, 0.44rem",left:"20px",backgroundColor:"#304FFE",color:"white",border:"1px solid rgba(0, 0, 0, 0.25)",borderRadius:"0.3125rem",cursor:"pointer",zIndex:10},children:"상가거리이동"}),s.jsx(c.default,{}),s.jsx("button",{onClick:()=>K(),style:{position:"absolute",bottom:"20px",left:"20px",padding:"10px",backgroundColor:"#304FFE",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",zIndex:10},children:"사용자 위치 이동"}),A&&s.jsx("div",{style:{position:"absolute",bottom:"20px",right:"20px",cursor:"pointer",zIndex:10},onClick:()=>{O(!1),E&&E.setMap(e)},children:s.jsx("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{id:"Group 232",children:[s.jsx("path",{id:"Vector",d:"M19 27H21.6667V19H19V27ZM20.3333 16.3333C20.7111 16.3333 21.028 16.2053 21.284 15.9493C21.54 15.6933 21.6676 15.3769 21.6667 15C21.6658 14.6231 21.5378 14.3067 21.2827 14.0507C21.0276 13.7947 20.7111 13.6667 20.3333 13.6667C19.9556 13.6667 19.6391 13.7947 19.384 14.0507C19.1289 14.3067 19.0009 14.6231 19 15C18.9991 15.3769 19.1271 15.6938 19.384 15.9507C19.6409 16.2076 19.9573 16.3351 20.3333 16.3333ZM20.3333 33.6667C18.4889 33.6667 16.7556 33.3164 15.1333 32.616C13.5111 31.9156 12.1 30.9658 10.9 29.7667C9.7 28.5676 8.75022 27.1564 8.05067 25.5333C7.35111 23.9102 7.00089 22.1769 7 20.3333C6.99911 18.4898 7.34934 16.7564 8.05067 15.1333C8.752 13.5102 9.70178 12.0991 10.9 10.9C12.0982 9.70089 13.5093 8.75111 15.1333 8.05067C16.7573 7.35022 18.4907 7 20.3333 7C22.176 7 23.9093 7.35022 25.5333 8.05067C27.1573 8.75111 28.5684 9.70089 29.7667 10.9C30.9649 12.0991 31.9151 13.5102 32.6173 15.1333C33.3196 16.7564 33.6693 18.4898 33.6667 20.3333C33.664 22.1769 33.3138 23.9102 32.616 25.5333C31.9182 27.1564 30.9684 28.5676 29.7667 29.7667C28.5649 30.9658 27.1538 31.916 25.5333 32.6173C23.9129 33.3187 22.1796 33.6684 20.3333 33.6667Z",fill:"#3554FE"}),s.jsx("circle",{id:"Ellipse 14",cx:"20",cy:"20",r:"20",fill:"#3554FE",fillOpacity:"0.25"}),s.jsx("circle",{id:"Ellipse 15",cx:"20",cy:"20",r:"16",fill:"#3554FE",fillOpacity:"0.25"})]})})})]})}}};